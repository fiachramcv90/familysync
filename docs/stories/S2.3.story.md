# <!-- Powered by BMAD™ Core -->

# Story S2.3: Code Cleanup & Technical Debt

## Status
⚠️ **IMPORTANT** - Not Started

## Story
**As a** developer,  
**I want** a clean, organized codebase without technical debt from debugging and development,  
**so that** the project is ready for feature development with a solid foundation.

## Acceptance Criteria

1. **Remove or organize debug API endpoints** properly in the codebase
2. **Commit or remove untracked files** appropriately based on their purpose
3. **Clean up unused imports and dead code** throughout the project
4. **Update .gitignore** for proper test artifacts and temporary files
5. **Ensure clean git status** with no unnecessary untracked files
6. **Organize project structure** according to established patterns

## Tasks / Subtasks

- [ ] **Audit and clean debug API endpoints** (AC: 1)
  - [ ] Review debug endpoints in `/api/debug-*` directories
  - [ ] Remove temporary debugging endpoints not needed in production
  - [ ] Move useful debug endpoints to proper development utilities
  - [ ] Document any debugging tools that should be retained
  - [ ] Ensure no debug code affects production builds
- [ ] **Handle untracked files appropriately** (AC: 2, 5)
  - [ ] Review `playwright.deploy.config.ts` and decide if it should be committed
  - [ ] Organize files in `src/app/api/debug-env/` directory
  - [ ] Clean up test results files (`.last-run 2.json`)
  - [ ] Remove temporary screenshots and debug artifacts
  - [ ] Commit files that should be version controlled
- [ ] **Code cleanup and optimization** (AC: 3)
  - [ ] Remove unused imports across all TypeScript/JavaScript files
  - [ ] Delete commented-out code that's no longer needed
  - [ ] Clean up console.log statements not needed for production
  - [ ] Remove temporary variables and debugging code
  - [ ] Optimize imports and organize them consistently
- [ ] **Update .gitignore and project configuration** (AC: 4)
  - [ ] Add patterns for test artifacts (test-results, playwright-report)
  - [ ] Ignore temporary debugging files and screenshots
  - [ ] Add patterns for build artifacts and cache files
  - [ ] Ensure environment files are properly ignored
  - [ ] Review and update editor-specific ignore patterns
- [ ] **Verify project structure compliance** (AC: 6)
  - [ ] Ensure components are in correct directories
  - [ ] Verify API routes follow proper organization
  - [ ] Check that test files are properly located
  - [ ] Confirm documentation is up to date
  - [ ] Validate that naming conventions are followed

## Dev Notes

### Current Technical Debt Identified

**Untracked Files:**
```bash
playwright.deploy.config.ts           # Decide: commit or remove?
src/app/api/debug-env/               # Debug endpoint directory
test-results/.last-run 2.json       # Test artifacts to ignore
```

**Debug Code Accumulation:**
- Multiple debug endpoints created during authentication development
- Temporary debugging statements and console.logs
- Test screenshots and debugging artifacts
- Unused imports from development iterations

### Cleanup Strategy

**Debug Endpoints Review:**
1. **Keep**: Useful development tools (environment checks, health endpoints)
2. **Remove**: Temporary debugging endpoints specific to recent auth work
3. **Document**: Any debug tools that should be retained for future development

**File Organization:**
1. **Commit**: Configuration files needed for deployment/testing
2. **Remove**: Temporary files and test artifacts
3. **Ignore**: File patterns that shouldn't be tracked

### Architecture Compliance

**Project Structure Standards:**
```
src/
├── app/                    # Next.js app router
│   ├── api/               # API routes (organized, no temp debug)
│   ├── dashboard/         # Dashboard pages
│   └── auth/              # Authentication pages
├── components/            # React components (organized by feature)
├── lib/                   # Utilities and configuration
├── hooks/                 # Custom React hooks
└── stores/                # State management
```

**Code Quality Standards:**
- No unused imports
- Consistent import organization
- No commented-out code blocks
- Minimal console.log statements (only for error handling)
- Proper TypeScript types throughout

### Dependencies
- **Requires**: All Phase 1 stories completed (S1.1, S1.2, S1.3) for clean foundation
- **Benefits**: All future development work
- **Low Risk**: Cleanup work unlikely to break functionality

## Testing

### Test Location Standards
- Verify no tests broken by cleanup
- Ensure test artifacts properly ignored
- Confirm build process unaffected

### Cleanup Verification
```bash
# Commands to verify cleanup success:
npm run lint              # Should pass with no new issues
npm run type-check        # Should pass (maintained from S1.3)
npm run build             # Should complete successfully
git status                # Should show clean working directory
```

### Quality Checks
- [ ] No unused imports detected by linter
- [ ] No commented-out code blocks remain
- [ ] Console.log statements only for legitimate logging
- [ ] All files properly organized in correct directories
- [ ] .gitignore covers all temporary and build files

## Security Review

### Code Security Cleanup
- [ ] Remove any accidentally committed secrets or keys
- [ ] Ensure debug endpoints don't expose sensitive information
- [ ] Verify no temporary debugging bypasses remain
- [ ] Clean up any hardcoded values that should be configurable

### Build Security
- [ ] Confirm no debug code affects production builds
- [ ] Ensure development-only code properly excluded
- [ ] Verify environment-specific configurations are correct

## Performance Impact

### Cleanup Benefits
- Reduced bundle size from removed dead code
- Faster builds without unnecessary files
- Improved development experience with organized code
- Better maintainability for future development

## Documentation Updates

### Documentation Cleanup
- [ ] Update README if any setup instructions changed
- [ ] Remove outdated comments and documentation
- [ ] Ensure code comments are accurate and useful
- [ ] Update any development workflow documentation

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|---------|
| 2025-09-10 | 1.0 | Initial code cleanup and technical debt story | BMad Orchestrator |

## Priority Classification

**Epic**: Project Stabilization  
**Phase**: 2 - Foundation Improvements  
**Priority**: P1 - Important  
**Estimated Effort**: 1-2 hours  
**Assigned Agent**: `maintenance` specialist  
**Risk**: Low - Cleanup work with minimal functionality impact  
**Dependencies**: All Phase 1 stories (S1.1, S1.2, S1.3) for stable foundation